<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Database.PostgreSQL.Simple.Notification</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Database.PostgreSQL.Simple.Notification.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">postgresql-simple-0.6.2: Mid-Level PostgreSQL client library</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2011-2015 Leon P Smith<br />(c) 2012 Joey Adams</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>leon@melding-monads.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Database.PostgreSQL.Simple.Notification</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Support for receiving asynchronous notifications via PostgreSQL's
 Listen/Notify mechanism.  See
 <a href="https://www.postgresql.org/docs/9.5/static/sql-notify.html">https://www.postgresql.org/docs/9.5/static/sql-notify.html</a> for more
 information.</p><p>Note that on Windows,  <code>getNotification</code> currently uses a polling loop
 of 1 second to check for more notifications,  due to some inadequacies
 in GHC's IO implementation and interface on that platform.   See GHC
 issue #7353 for more information.  While this workaround is less than
 ideal,  notifications are still better than polling the database directly.
 Notifications do not create any extra work for the backend,  and are
 likely cheaper on the client side as well.</p><p><a href="https://hackage.haskell.org/trac/ghc/ticket/7353">https://hackage.haskell.org/trac/ghc/ticket/7353</a></p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Notification">Notification</a> = <a href="#v:Notification">Notification</a> {<ul class="subs"><li><a href="#v:notificationPid">notificationPid</a> :: !<a href="../base-4.12.0.0/System-Posix-Types.html#t:CPid" title="System.Posix.Types">CPid</a></li><li><a href="#v:notificationChannel">notificationChannel</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li><a href="#v:notificationData">notificationData</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li></ul>}</li><li class="src short"><a href="#v:getNotification">getNotification</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a></li><li class="src short"><a href="#v:getNotificationNonBlocking">getNotificationNonBlocking</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a>)</li><li class="src short"><a href="#v:getBackendPID">getBackendPID</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.12.0.0/System-Posix-Types.html#t:CPid" title="System.Posix.Types">CPid</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Notification" class="def">Notification</a> <a href="src/Database.PostgreSQL.Simple.Notification.html#Notification" class="link">Source</a> <a href="#t:Notification" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Notification" class="def">Notification</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:notificationPid" class="def">notificationPid</a> :: !<a href="../base-4.12.0.0/System-Posix-Types.html#t:CPid" title="System.Posix.Types">CPid</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:notificationChannel" class="def">notificationChannel</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:notificationData" class="def">notificationData</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Notification" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Notification:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a></span> <a href="src/Database.PostgreSQL.Simple.Notification.html#line-61" class="link">Source</a> <a href="#t:Notification" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Notification:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-PostgreSQL-Simple-Notification.html">Database.PostgreSQL.Simple.Notification</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a> -&gt; <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a> -&gt; <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Notification:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a></span> <a href="src/Database.PostgreSQL.Simple.Notification.html#line-61" class="link">Source</a> <a href="#t:Notification" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Notification:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-PostgreSQL-Simple-Notification.html">Database.PostgreSQL.Simple.Notification</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getNotification" class="def">getNotification</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a> <a href="src/Database.PostgreSQL.Simple.Notification.html#getNotification" class="link">Source</a> <a href="#v:getNotification" class="selflink">#</a></p><div class="doc"><p>Returns a single notification.   If no notifications are available,
   <code><a href="Database-PostgreSQL-Simple-Notification.html#v:getNotification" title="Database.PostgreSQL.Simple.Notification">getNotification</a></code> blocks until one arrives.</p><p>It is safe to call <code><a href="Database-PostgreSQL-Simple-Notification.html#v:getNotification" title="Database.PostgreSQL.Simple.Notification">getNotification</a></code> on a connection that is concurrently
   being used for other purposes,   note however that PostgreSQL does not
   deliver notifications while a connection is inside a transaction.</p></div></div><div class="top"><p class="src"><a id="v:getNotificationNonBlocking" class="def">getNotificationNonBlocking</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> (<a href="../base-4.12.0.0/GHC-Maybe.html#t:Maybe" title="GHC.Maybe">Maybe</a> <a href="Database-PostgreSQL-Simple-Notification.html#t:Notification" title="Database.PostgreSQL.Simple.Notification">Notification</a>) <a href="src/Database.PostgreSQL.Simple.Notification.html#getNotificationNonBlocking" class="link">Source</a> <a href="#v:getNotificationNonBlocking" class="selflink">#</a></p><div class="doc"><p>Non-blocking variant of <code><a href="Database-PostgreSQL-Simple-Notification.html#v:getNotification" title="Database.PostgreSQL.Simple.Notification">getNotification</a></code>.   Returns a single notification,
 if available.   If no notifications are available,  returns <code><a href="../base-4.12.0.0/GHC-Maybe.html#v:Nothing" title="GHC.Maybe">Nothing</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:getBackendPID" class="def">getBackendPID</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.12.0.0/System-Posix-Types.html#t:CPid" title="System.Posix.Types">CPid</a> <a href="src/Database.PostgreSQL.Simple.Notification.html#getBackendPID" class="link">Source</a> <a href="#v:getBackendPID" class="selflink">#</a></p><div class="doc"><p>Returns the process <code><a href="../base-4.12.0.0/System-Posix-Types.html#t:CPid" title="System.Posix.Types">CPid</a></code> of the backend server process
 handling this connection.</p><p>The backend PID is useful for debugging purposes and for comparison
 to NOTIFY messages (which include the PID of the notifying backend
 process). Note that the PID belongs to a process executing on the
 database server host, not the local host!</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>