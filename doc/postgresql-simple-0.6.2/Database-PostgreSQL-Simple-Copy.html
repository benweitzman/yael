<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Database.PostgreSQL.Simple.Copy</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Database.PostgreSQL.Simple.Copy.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">postgresql-simple-0.6.2: Mid-Level PostgreSQL client library</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) 2013 Leon P Smith</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>Leon P Smith &lt;leon@melding-monads.com&gt;</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Database.PostgreSQL.Simple.Copy</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>mid-level support for COPY IN and COPY OUT.   See
 <a href="https://www.postgresql.org/docs/9.5/static/sql-copy.html">https://www.postgresql.org/docs/9.5/static/sql-copy.html</a> for
 more information.</p><p>To use this binding,  first call <code><a href="Database-PostgreSQL-Simple-Copy.html#v:copy" title="Database.PostgreSQL.Simple.Copy">copy</a></code> with an appropriate
 query as documented in the link above.  Then, in the case of a
 <code>COPY TO STDOUT</code> query,  call <code><a href="Database-PostgreSQL-Simple-Copy.html#v:getCopyData" title="Database.PostgreSQL.Simple.Copy">getCopyData</a></code> repeatedly until it
 returns <code><a href="Database-PostgreSQL-Simple-Copy.html#v:CopyOutDone" title="Database.PostgreSQL.Simple.Copy">CopyOutDone</a></code>.   In the case of a <code>COPY FROM STDIN</code>
 query,  call <code><a href="Database-PostgreSQL-Simple-Copy.html#v:putCopyData" title="Database.PostgreSQL.Simple.Copy">putCopyData</a></code> repeatedly and then finish by calling
 either <code><a href="Database-PostgreSQL-Simple-Copy.html#v:putCopyEnd" title="Database.PostgreSQL.Simple.Copy">putCopyEnd</a></code> to proceed or <code><a href="Database-PostgreSQL-Simple-Copy.html#v:putCopyError" title="Database.PostgreSQL.Simple.Copy">putCopyError</a></code> to abort.</p><p>You cannot issue another query on the same connection while a copy
 is ongoing; this will result in an exception.   It is harmless to
 concurrently call <code>getNotification</code> on a connection while it is in
 a <code>CopyIn</code> or <code>CopyOut</code> state,  however be aware that current versions
 of the PostgreSQL backend will not deliver notifications to a client
 while a transaction is ongoing.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:copy">copy</a> :: <a href="Database-PostgreSQL-Simple-ToRow.html#t:ToRow" title="Database.PostgreSQL.Simple.ToRow">ToRow</a> params =&gt; <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="Database-PostgreSQL-Simple-Types.html#t:Query" title="Database.PostgreSQL.Simple.Types">Query</a> -&gt; params -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:copy_">copy_</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="Database-PostgreSQL-Simple-Types.html#t:Query" title="Database.PostgreSQL.Simple.Types">Query</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:CopyOutResult">CopyOutResult</a><ul class="subs"><li>= <a href="#v:CopyOutRow">CopyOutRow</a> !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></li><li>| <a href="#v:CopyOutDone">CopyOutDone</a> !<a href="../base-4.12.0.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li></ul></li><li class="src short"><a href="#v:getCopyData">getCopyData</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a></li><li class="src short"><a href="#v:putCopyData">putCopyData</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li><li class="src short"><a href="#v:putCopyEnd">putCopyEnd</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li><li class="src short"><a href="#v:putCopyError">putCopyError</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:copy" class="def">copy</a> :: <a href="Database-PostgreSQL-Simple-ToRow.html#t:ToRow" title="Database.PostgreSQL.Simple.ToRow">ToRow</a> params =&gt; <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="Database-PostgreSQL-Simple-Types.html#t:Query" title="Database.PostgreSQL.Simple.Types">Query</a> -&gt; params -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Database.PostgreSQL.Simple.Copy.html#copy" class="link">Source</a> <a href="#v:copy" class="selflink">#</a></p><div class="doc"><p>Issue a <code>COPY FROM STDIN</code> or <code>COPY TO STDOUT</code> query.   In the former
   case, the connection's state will change to <code>CopyIn</code>;  in the latter,
   <code>CopyOut</code>.  The connection must be in the ready state in order
   to call this function.  Performs parameter subsitution.</p></div></div><div class="top"><p class="src"><a id="v:copy_" class="def">copy_</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="Database-PostgreSQL-Simple-Types.html#t:Query" title="Database.PostgreSQL.Simple.Types">Query</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Database.PostgreSQL.Simple.Copy.html#copy_" class="link">Source</a> <a href="#v:copy_" class="selflink">#</a></p><div class="doc"><p>Issue a <code>COPY FROM STDIN</code> or <code>COPY TO STDOUT</code> query.   In the former
   case, the connection's state will change to <code>CopyIn</code>;  in the latter,
   <code>CopyOut</code>.  The connection must be in the ready state in order
   to call this function.  Does not perform parameter subsitution.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CopyOutResult" class="def">CopyOutResult</a> <a href="src/Database.PostgreSQL.Simple.Copy.html#CopyOutResult" class="link">Source</a> <a href="#t:CopyOutResult" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CopyOutRow" class="def">CopyOutRow</a> !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a></td><td class="doc"><p>Data representing either exactly
   one row of the result,  or header
   or footer data depending on format.</p></td></tr><tr><td class="src"><a id="v:CopyOutDone" class="def">CopyOutDone</a> !<a href="../base-4.12.0.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></td><td class="doc"><p>No more rows, and a count of the
   number of rows returned.</p></td></tr></table></div><div class="subs instances"><details id="i:CopyOutResult" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CopyOutResult:Eq:1"></span> <a href="../base-4.12.0.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a></span> <a href="src/Database.PostgreSQL.Simple.Copy.html#line-104" class="link">Source</a> <a href="#t:CopyOutResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CopyOutResult:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-PostgreSQL-Simple-Copy.html">Database.PostgreSQL.Simple.Copy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a> -&gt; <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a> -&gt; <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a> -&gt; <a href="../base-4.12.0.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:CopyOutResult:Show:2"></span> <a href="../base-4.12.0.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a></span> <a href="src/Database.PostgreSQL.Simple.Copy.html#line-104" class="link">Source</a> <a href="#t:CopyOutResult" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:CopyOutResult:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-PostgreSQL-Simple-Copy.html">Database.PostgreSQL.Simple.Copy</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.12.0.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a> -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a> -&gt; <a href="../base-4.12.0.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a>] -&gt; <a href="../base-4.12.0.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:getCopyData" class="def">getCopyData</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="Database-PostgreSQL-Simple-Copy.html#t:CopyOutResult" title="Database.PostgreSQL.Simple.Copy">CopyOutResult</a> <a href="src/Database.PostgreSQL.Simple.Copy.html#getCopyData" class="link">Source</a> <a href="#v:getCopyData" class="selflink">#</a></p><div class="doc"><p>Retrieve some data from a <code>COPY TO STDOUT</code> query.   A connection
   must be in the <code>CopyOut</code> state in order to call this function.  If this
   returns a <code><a href="Database-PostgreSQL-Simple-Copy.html#v:CopyOutRow" title="Database.PostgreSQL.Simple.Copy">CopyOutRow</a></code>, the connection remains in the <code>CopyOut</code> state,
   if it returns <code><a href="Database-PostgreSQL-Simple-Copy.html#v:CopyOutDone" title="Database.PostgreSQL.Simple.Copy">CopyOutDone</a></code>, then the connection has reverted to the
   ready state.</p></div></div><div class="top"><p class="src"><a id="v:putCopyData" class="def">putCopyData</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Database.PostgreSQL.Simple.Copy.html#putCopyData" class="link">Source</a> <a href="#v:putCopyData" class="selflink">#</a></p><div class="doc"><p>Feed some data to a <code>COPY FROM STDIN</code> query.  Note that
   the data does not need to represent a single row,  or even an
   integral number of rows.  The net result of
   <code>putCopyData conn a &gt;&gt; putCopyData conn b</code>
   is the same as <code>putCopyData conn c</code> whenever <code>c == BS.append a b</code>.</p><p>A connection must be in the <code>CopyIn</code> state in order to call this
   function,  otherwise a <code><a href="Database-PostgreSQL-Simple-Internal.html#t:SqlError" title="Database.PostgreSQL.Simple.Internal">SqlError</a></code> exception will result.  The
   connection remains in the <code>CopyIn</code> state after this function
   is called.</p></div></div><div class="top"><p class="src"><a id="v:putCopyEnd" class="def">putCopyEnd</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> <a href="../base-4.12.0.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> <a href="src/Database.PostgreSQL.Simple.Copy.html#putCopyEnd" class="link">Source</a> <a href="#v:putCopyEnd" class="selflink">#</a></p><div class="doc"><p>Completes a <code>COPY FROM STDIN</code> query.  Returns the number of rows
   processed.</p><p>A connection must be in the <code>CopyIn</code> state in order to call this
   function,  otherwise a <code><a href="Database-PostgreSQL-Simple-Internal.html#t:SqlError" title="Database.PostgreSQL.Simple.Internal">SqlError</a></code> exception will result.  The
   connection's state changes back to ready after this function
   is called.</p></div></div><div class="top"><p class="src"><a id="v:putCopyError" class="def">putCopyError</a> :: <a href="Database-PostgreSQL-Simple-Internal.html#t:Connection" title="Database.PostgreSQL.Simple.Internal">Connection</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString" title="Data.ByteString">ByteString</a> -&gt; <a href="../base-4.12.0.0/System-IO.html#t:IO" title="System.IO">IO</a> () <a href="src/Database.PostgreSQL.Simple.Copy.html#putCopyError" class="link">Source</a> <a href="#v:putCopyError" class="selflink">#</a></p><div class="doc"><p>Aborts a <code>COPY FROM STDIN</code> query.  The string parameter is simply
   an arbitrary error message that may show up in the PostgreSQL
   server's log.</p><p>A connection must be in the <code>CopyIn</code> state in order to call this
   function,  otherwise a <code><a href="Database-PostgreSQL-Simple-Internal.html#t:SqlError" title="Database.PostgreSQL.Simple.Internal">SqlError</a></code> exception will result.  The
   connection's state changes back to ready after this function
   is called.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>