<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>OpenTracing.Tracer</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/OpenTracing.Tracer.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">opentracing-0.1.0.0: OpenTracing for Haskell</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">OpenTracing.Tracer</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides mid and high level tracing functions.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Tracer">Tracer</a> = <a href="#v:Tracer">Tracer</a> {<ul class="subs"><li><a href="#v:tracerStart">tracerStart</a> :: <span class="keyword">forall</span> m. <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a> -&gt; m <a href="OpenTracing-Span.html#t:Span" title="OpenTracing.Span">Span</a></li><li><a href="#v:tracerReport">tracerReport</a> :: <span class="keyword">forall</span> m. <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="OpenTracing-Span.html#t:FinishedSpan" title="OpenTracing.Span">FinishedSpan</a> -&gt; m ()</li></ul>}</li><li class="src short"><span class="keyword">class</span> <a href="#t:HasTracer">HasTracer</a> a <span class="keyword">where</span><ul class="subs"><li><a href="#v:tracer">tracer</a> :: <a href="../lens-4.17.1/Control-Lens-Getter.html#t:Getting" title="Control.Lens.Getter">Getting</a> r a <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a></li></ul></li><li class="src short"><a href="#v:runTracer">runTracer</a> :: <a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> r =&gt; r -&gt; <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> r m a -&gt; m a</li><li class="src short"><a href="#v:traced">traced</a> :: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; t -&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a> -&gt; (<a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a> -&gt; m a) -&gt; m (<a href="OpenTracing-Span.html#t:Traced" title="OpenTracing.Span">Traced</a> a)</li><li class="src short"><a href="#v:traced_">traced_</a> :: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; t -&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a> -&gt; (<a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a> -&gt; m a) -&gt; m a</li><li class="src short"><a href="#v:startSpan">startSpan</a> :: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; t -&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a> -&gt; m <a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a></li><li class="src short"><a href="#v:finishSpan">finishSpan</a> :: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; t -&gt; <a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a> -&gt; m <a href="OpenTracing-Span.html#t:FinishedSpan" title="OpenTracing.Span">FinishedSpan</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Tracer" class="def">Tracer</a> <a href="src/OpenTracing.Tracer.html#Tracer" class="link">Source</a> <a href="#t:Tracer" class="selflink">#</a></p><div class="doc"><p>A <code><a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a></code> is a set of effectful actions that define the mid-level interface
 to an <a href="https://github.com/opentracing/specification/blob/master/specification.md#tracer">OpenTracing tracer</a></p><p>Appliction code should generally construct a <code><a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a></code> once and then use other
 higher-level functions such as <code><a href="OpenTracing-Tracer.html#v:traced" title="OpenTracing.Tracer">traced</a></code>, <code><a href="OpenTracing-Tracer.html#v:startSpan" title="OpenTracing.Tracer">startSpan</a></code>, <code>finishedSpan</code>.</p><p><em>Since: 0.1.0.0</em></p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Tracer" class="def">Tracer</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:tracerStart" class="def">tracerStart</a> :: <span class="keyword">forall</span> m. <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a> -&gt; m <a href="OpenTracing-Span.html#t:Span" title="OpenTracing.Span">Span</a></dfn><div class="doc"><p>Start recording a new span with the given options. This is
 a mid-level operation that will handle start timing and random span ID
 generation.</p><p>Application code should supply this field with <code>stdTracer</code>.</p></div></li><li><dfn class="src"><a id="v:tracerReport" class="def">tracerReport</a> :: <span class="keyword">forall</span> m. <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m =&gt; <a href="OpenTracing-Span.html#t:FinishedSpan" title="OpenTracing.Span">FinishedSpan</a> -&gt; m ()</dfn><div class="doc"><p>Report a finished span. What reporting means for each application will
 depend on where this data is going. There are multiple backends that define
 reporters for Google Cloudtrace, Zipkin, and Jaeger, for example.</p></div></li></ul></div></td></tr></table></div><div class="subs instances"><details id="i:Tracer" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Tracer:HasTracer:1"></span> <a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a></span> <a href="src/OpenTracing.Tracer.html#line-60" class="link">Source</a> <a href="#t:Tracer" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Tracer:HasTracer:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="OpenTracing-Tracer.html">OpenTracing.Tracer</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:tracer">tracer</a> :: <a href="../lens-4.17.1/Control-Lens-Getter.html#t:Getting" title="Control.Lens.Getter">Getting</a> r <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a> <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a> <a href="src/OpenTracing.Tracer.html#tracer" class="link">Source</a> <a href="#v:tracer" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:HasTracer" class="def">HasTracer</a> a <span class="keyword">where</span> <a href="src/OpenTracing.Tracer.html#HasTracer" class="link">Source</a> <a href="#t:HasTracer" class="selflink">#</a></p><div class="doc"><p>Typeclass for application environments that contain a <code><a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a></code>.</p><p><em>Since: 0.1.0.0</em></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:tracer" class="def">tracer</a> :: <a href="../lens-4.17.1/Control-Lens-Getter.html#t:Getting" title="Control.Lens.Getter">Getting</a> r a <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a> <a href="src/OpenTracing.Tracer.html#tracer" class="link">Source</a> <a href="#v:tracer" class="selflink">#</a></p></div><div class="subs instances"><details id="i:HasTracer" open="open"><summary>Instances</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:ic:HasTracer:HasTracer:1"></span> <a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a></span> <a href="src/OpenTracing.Tracer.html#line-60" class="link">Source</a> <a href="#t:HasTracer" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:ic:HasTracer:HasTracer:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="OpenTracing-Tracer.html">OpenTracing.Tracer</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:tracer">tracer</a> :: <a href="../lens-4.17.1/Control-Lens-Getter.html#t:Getting" title="Control.Lens.Getter">Getting</a> r <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a> <a href="OpenTracing-Tracer.html#t:Tracer" title="OpenTracing.Tracer">Tracer</a> <a href="src/OpenTracing.Tracer.html#tracer" class="link">Source</a> <a href="#v:tracer" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:runTracer" class="def">runTracer</a> :: <a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> r =&gt; r -&gt; <a href="../mtl-2.2.2/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> r m a -&gt; m a <a href="src/OpenTracing.Tracer.html#runTracer" class="link">Source</a> <a href="#v:runTracer" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:traced" class="def">traced</a> <a href="src/OpenTracing.Tracer.html#traced" class="link">Source</a> <a href="#v:traced" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; t</td><td class="doc"><p>A tracer environment</p></td></tr><tr><td class="src">-&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a></td><td class="doc"><p>The options to use when creating the span. Options include:</p><ul><li>Operation name</li><li>Tags</li><li>Relations to other spans</li></ul></td></tr><tr><td class="src">-&gt; (<a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a> -&gt; m a)</td><td class="doc"><p>the computation to trace. The argument is the
 span that is created. It can be used to:</p><ul><li>Add logs</li><li>Add child spans</li></ul></td></tr><tr><td class="src">-&gt; m (<a href="OpenTracing-Span.html#t:Traced" title="OpenTracing.Span">Traced</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Trace a computation as a span. This is a high-level operation that will handle
 all aspects of the trace, including timing and reporting. If the traced computation
 throws an excpetion, <code><a href="OpenTracing-Tracer.html#v:traced" title="OpenTracing.Tracer">traced</a></code> will clean up and add logs before rethrowing the
 exception</p><pre>        traced tracer (spanOpts &quot;hello&quot; mempty          ) $ parent -&gt;
        traced tracer (spanOpts &quot;world&quot; (childOf parent)) $ child -&gt;
           liftIO $ do
               putStrLn &quot;doing some work...&quot;
               addLogRecord child (Message &quot;doing some work&quot;)
               threadDelay 500000
</pre><p><em>Since: 0.1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:traced_" class="def">traced_</a> :: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../exceptions-0.10.4/Control-Monad-Catch.html#t:MonadMask" title="Control.Monad.Catch">MonadMask</a> m, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; t -&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a> -&gt; (<a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a> -&gt; m a) -&gt; m a <a href="src/OpenTracing.Tracer.html#traced_" class="link">Source</a> <a href="#v:traced_" class="selflink">#</a></p><div class="doc"><p>Variant of <code><a href="OpenTracing-Tracer.html#v:traced" title="OpenTracing.Tracer">traced</a></code> that doesn't return the wrapped value.</p><p><em>Since: 0.1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:startSpan" class="def">startSpan</a> :: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; t -&gt; <a href="OpenTracing-Span.html#t:SpanOpts" title="OpenTracing.Span">SpanOpts</a> -&gt; m <a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a> <a href="src/OpenTracing.Tracer.html#startSpan" class="link">Source</a> <a href="#v:startSpan" class="selflink">#</a></p><div class="doc"><p>Start recording a span</p><p><em>Since: 0.1.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:finishSpan" class="def">finishSpan</a> :: (<a href="OpenTracing-Tracer.html#t:HasTracer" title="OpenTracing.Tracer">HasTracer</a> t, <a href="../base-4.12.0.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m) =&gt; t -&gt; <a href="OpenTracing-Span.html#t:ActiveSpan" title="OpenTracing.Span">ActiveSpan</a> -&gt; m <a href="OpenTracing-Span.html#t:FinishedSpan" title="OpenTracing.Span">FinishedSpan</a> <a href="src/OpenTracing.Tracer.html#finishSpan" class="link">Source</a> <a href="#v:finishSpan" class="selflink">#</a></p><div class="doc"><p>Finish recording a span</p><p><em>Since: 0.1.0.0</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>